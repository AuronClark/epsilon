<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>epsilon: KernelObject Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">epsilon
   </div>
   <div id="projectbrief">Physically Based Spectral Path Tracer</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="class_kernel_object-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">KernelObject Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides a uniform interface for kernel arguments.  
 <a href="class_kernel_object.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="architecture_8hpp_source.html">architecture.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aff9ffdcbe29972a01461fb80ee8c3e56"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_object.html#aff9ffdcbe29972a01461fb80ee8c3e56">IsActive</a> ()=0</td></tr>
<tr class="memdesc:aff9ffdcbe29972a01461fb80ee8c3e56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the kernel object is active.  <a href="#aff9ffdcbe29972a01461fb80ee8c3e56"></a><br/></td></tr>
<tr class="memitem:a51ba673b95195c9c86a2552dc22895bf"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_object.html#a51ba673b95195c9c86a2552dc22895bf">Initialize</a> (const <a class="el" href="struct_engine_params.html">EngineParams</a> &amp;params)=0</td></tr>
<tr class="memdesc:a51ba673b95195c9c86a2552dc22895bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the kernel object.  <a href="#a51ba673b95195c9c86a2552dc22895bf"></a><br/></td></tr>
<tr class="memitem:a2e57c2b57016c1ba7a8a0a5c48e3f91b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_object.html#a2e57c2b57016c1ba7a8a0a5c48e3f91b">BindTo</a> (cl::Kernel kernel, cl_uint slot)=0</td></tr>
<tr class="memdesc:a2e57c2b57016c1ba7a8a0a5c48e3f91b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Binds the kernel object to a kernel.  <a href="#a2e57c2b57016c1ba7a8a0a5c48e3f91b"></a><br/></td></tr>
<tr class="memitem:a9341caf9fdf7f3e233513a2d02e7d13b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_object.html#a9341caf9fdf7f3e233513a2d02e7d13b">Update</a> (const <a class="el" href="struct_engine_params.html">EngineParams</a> &amp;params, size_t index)=0</td></tr>
<tr class="memdesc:a9341caf9fdf7f3e233513a2d02e7d13b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the kernel object.  <a href="#a9341caf9fdf7f3e233513a2d02e7d13b"></a><br/></td></tr>
<tr class="memitem:a543d2f1a97aaaf664cd524829b74ae77"><td class="memItemLeft" align="right" valign="top">virtual void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_object.html#a543d2f1a97aaaf664cd524829b74ae77">Query</a> (const <a class="el" href="struct_engine_params.html">EngineParams</a> &amp;params, size_t tag)=0</td></tr>
<tr class="memdesc:a543d2f1a97aaaf664cd524829b74ae77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns object-specific information.  <a href="#a543d2f1a97aaaf664cd524829b74ae77"></a><br/></td></tr>
<tr class="memitem:abe96f105096a6fc846529bc338f17fd9"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_object.html#abe96f105096a6fc846529bc338f17fd9">Cleanup</a> (const <a class="el" href="struct_engine_params.html">EngineParams</a> &amp;params)=0</td></tr>
<tr class="memdesc:abe96f105096a6fc846529bc338f17fd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans up any resources used by the object.  <a href="#abe96f105096a6fc846529bc338f17fd9"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a244273e04d2b9cc58502c77e7cabf3c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_object.html#a244273e04d2b9cc58502c77e7cabf3c7">GetData</a> (std::string id, const <a class="el" href="struct_engine_params.html">EngineParams</a> &amp;params, std::ifstream &amp;data)</td></tr>
<tr class="memdesc:a244273e04d2b9cc58502c77e7cabf3c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads scene data based on an identifier.  <a href="#a244273e04d2b9cc58502c77e7cabf3c7"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Provides a uniform interface for kernel arguments. </p>
<p>Each kernel object manages its own memory (both host-side and device-side) and binds itself to a particular kernel argument slot, provided by the engine. Inputs to kernel objects come in two forms:</p>
<ul>
<li>Scene data, where the kernel object requests the contents of a particular file located inside the selected scene's directory (such as geometry data or material definitions). The object loads this data itself.</li>
<li>Engine parameters, which are always passed to the kernel object even if not specifically required. This contains parameters selected by the user at runtime, such as render width and height, or quality (samples/pixel).</li>
</ul>
<p>A kernel object can be passive, meaning it is responsible for storing data and uploading it to the device once, or it can be active, meaning it will be able to update itself and upload new data to the device as needed. </p>
</div><h2>Member Function Documentation</h2>
<a class="anchor" id="a2e57c2b57016c1ba7a8a0a5c48e3f91b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void KernelObject::BindTo </td>
          <td>(</td>
          <td class="paramtype">cl::Kernel&#160;</td>
          <td class="paramname"><em>kernel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl_uint&#160;</td>
          <td class="paramname"><em>slot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Binds the kernel object to a kernel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kernel</td><td>The OpenCL kernel to bind to. </td></tr>
    <tr><td class="paramname">slot</td><td>The argument slot to bind to. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abe96f105096a6fc846529bc338f17fd9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void KernelObject::Cleanup </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_engine_params.html">EngineParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cleans up any resources used by the object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>The engine parameters. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a244273e04d2b9cc58502c77e7cabf3c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void KernelObject::GetData </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_engine_params.html">EngineParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ifstream &amp;&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads scene data based on an identifier. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The identifier of the scene data to load. </td></tr>
    <tr><td class="paramname">params</td><td>The engine parameters which were given. </td></tr>
    <tr><td class="paramname">data</td><td>A streamable object containing the scene data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If the scene data cannot be found, this will throw an exception, and the kernel object should probably die and cause the engine to fail if it cannot recover. </dd></dl>

</div>
</div>
<a class="anchor" id="a51ba673b95195c9c86a2552dc22895bf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void KernelObject::Initialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_engine_params.html">EngineParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the kernel object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>The engine parameters. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aff9ffdcbe29972a01461fb80ee8c3e56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool KernelObject::IsActive </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether the kernel object is active. </p>
<dl class="section return"><dt>Returns</dt><dd>If this returns <code>true</code>, then the kernel object's <code>Update</code> method will be called before each kernel invocation. </dd></dl>

</div>
</div>
<a class="anchor" id="a543d2f1a97aaaf664cd524829b74ae77"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void* KernelObject::Query </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_engine_params.html">EngineParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>tag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns object-specific information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>The engine parameters. </td></tr>
    <tr><td class="paramname">tag</td><td>A tag identifying which information is required. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the requested information. The format of this information may vary and is assumed to be known to the caller. If the information is not found, returns zero. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Do not attempt to modify or deallocate the returned memory, as it belongs to the kernel object. </dd></dl>

</div>
</div>
<a class="anchor" id="a9341caf9fdf7f3e233513a2d02e7d13b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void KernelObject::Update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_engine_params.html">EngineParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the kernel object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>The engine parameters. </td></tr>
    <tr><td class="paramname">index</td><td>This indicates how many previous kernel invocations have occurred (e.g. if this contains 3, then this method has already been called three times). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>In total, this method will be called <code>params.samples</code> times. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/engine/<a class="el" href="architecture_8hpp_source.html">architecture.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 20 2013 18:45:14 for epsilon by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
